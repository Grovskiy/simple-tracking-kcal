(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[981],{704:(e,t,s)=>{Promise.resolve().then(s.bind(s,3867))},3867:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(5155),r=s(9616),n=s(5236),l=s(2115),i=s(3473);let d=e=>{let{onAddProduct:t}=e,[s,r]=(0,l.useState)(""),[n,d]=(0,l.useState)("");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-base font-semibold",children:"Додати новий продукт"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s&&n&&(t({name:s,caloriesPer100g:parseInt(n)}),r(""),d(""))},className:"flex gap-2",children:[(0,a.jsxs)("label",{className:"form-control w-full max-w-xs flex-1",children:[(0,a.jsx)("div",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Назва продукту"})}),(0,a.jsx)("input",{type:"text",placeholder:"Цільнозерновий хліб",className:"input input-sm input-bordered w-full max-w-xs text-base",value:s,onChange:e=>r(e.target.value)})]}),(0,a.jsxs)("label",{className:"form-controlmax-w-xs -mr-2",children:[(0,a.jsx)("div",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Ккал на 100г"})}),(0,a.jsx)("input",{type:"number",placeholder:"244",className:"input input-sm input-bordered w-20 text-base",value:n,onChange:e=>d(e.target.value)})]}),(0,a.jsxs)("label",{className:"form-control max-w-xs",children:[(0,a.jsx)("div",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"⠀"})}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",children:(0,a.jsx)(i.A,{className:"h-5 w-5"})})]})]})]})};var c=s(2423);let o=e=>{let{currentGoal:t,onSetGoal:s,goalHistory:r}=e,[n,i]=(0,l.useState)(""),d=async e=>{if(e.preventDefault(),n)try{await s(Number(n)),i("")}catch(e){console.error("Error setting goal:",e)}},o=e=>new Date(e).toLocaleDateString("uk-UA",{day:"numeric",month:"long",year:"numeric"});return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"card-title text-base",children:"Ціль калорій"}),(0,a.jsx)("div",{className:"text-base",children:t?"".concat(t," ккал"):"Не встановлено"})]}),(0,a.jsxs)("form",{onSubmit:d,className:"mt-4 flex gap-2",children:[(0,a.jsx)("input",{type:"number",placeholder:"Нова ціль (ккал)",className:"input input-sm input-bordered flex-1 text-base",value:n,onChange:e=>i(e.target.value)}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",children:"Зберегти"})]}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"divider",children:"Історія змін"}),(0,a.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-md bg-base-200 px-2 py-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:o(e.startDate)})]}),(0,a.jsxs)("span",{className:"font-medium",children:[e.value," ккал"]})]},t))})]})]})};var u=s(5686),m=s(6030);let x={id:"",name:"",caloriesPer100g:0,userId:"",createdAt:""},f=e=>{var t;let{products:s,onDeleteProduct:r}=e,[n,i]=(0,l.useState)({isOpen:!1,product:x}),d=e=>{i({isOpen:!0,product:e})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-md bg-base-200 px-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-x-2 flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"font-medium truncate block overflow-hidden text-overflow-ellipsis whitespace-nowrap",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-base-content/70 whitespace-nowrap",children:[e.caloriesPer100g," ккал"]})]}),(0,a.jsx)("button",{className:"btn btn-ghost btn-sm flex-shrink-0",onClick:()=>d(e),children:(0,a.jsx)(u.A,{size:16})})]},e.id))}),(0,a.jsx)(m.R,{isOpen:n.isOpen,onConfirm:()=>{n.product&&(r(n.product.id),i({isOpen:!1,product:x}))},onCancel:()=>i({isOpen:!1,product:x}),itemName:null===(t=n.product)||void 0===t?void 0:t.name})]})};var p=s(3312),h=s(9749),g=s(1125),b=s(1567);let v=g.bL,j=l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(g.B8,{ref:t,className:(0,b.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...r})});j.displayName=g.B8.displayName;let N=l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(g.l9,{ref:t,className:(0,b.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...r})});N.displayName=g.l9.displayName;let w=l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(g.UC,{ref:t,className:(0,b.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});w.displayName=g.UC.displayName;var y=s(9223),k=s(6498);let S=()=>{let{user:e,logout:t}=(0,r.Z)(),{goalHistory:s,currentGoal:l,setNewGoal:i,loading:c}=(0,y.l)(null==e?void 0:e.uid),{products:u,addProduct:m,deleteProduct:x,loading:g}=(0,k.Q)(null==e?void 0:e.uid);return g||c?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)("span",{className:"loading loading-ring loading-lg"})}):(0,a.jsxs)("div",{className:"min-h-screen pb-20",children:[(0,a.jsx)("div",{className:"bg-background shadow-sm",children:(0,a.jsxs)("div",{className:"mx-auto flex max-w-xl items-center justify-between px-4 py-2",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold",children:"Налаштування"}),(0,a.jsxs)(p.$,{onClick:t,size:"sm",variant:"ghost",children:[(0,a.jsx)(n.A,{size:16})," Вийти"]})]})}),(0,a.jsx)("div",{className:"mx-auto max-w-xl px-4 py-4",children:(0,a.jsxs)(v,{defaultValue:"products",children:[(0,a.jsxs)(j,{className:"mb-4 w-full",children:[(0,a.jsx)(N,{value:"products",className:"flex-1",children:"Мої продукти"}),(0,a.jsx)(N,{value:"goals",className:"flex-1",children:"Цілі"})]}),(0,a.jsx)(w,{value:"products",children:(0,a.jsx)(h.Zp,{children:(0,a.jsxs)(h.Wu,{children:[(0,a.jsx)(d,{onAddProduct:m}),(0,a.jsx)("div",{className:"divider",children:"Мої продукти"}),(0,a.jsx)(f,{products:u,onDeleteProduct:x})]})})}),(0,a.jsx)(w,{value:"goals",children:(0,a.jsx)(h.Zp,{children:(0,a.jsx)(h.Wu,{children:(0,a.jsx)(o,{currentGoal:l,onSetGoal:i,goalHistory:s})})})})]})})]})}},6030:(e,t,s)=>{"use strict";s.d(t,{R:()=>r});var a=s(5155);let r=e=>{let{isOpen:t,onConfirm:s,onCancel:r,itemName:n}=e;return t?(0,a.jsxs)("div",{className:"modal modal-open rounded-box",children:[(0,a.jsxs)("div",{className:"modal-box",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Підтвердження видалення"}),(0,a.jsxs)("p",{className:"py-4",children:["Ви впевнені, що хочете видалити ",n,"?"]}),(0,a.jsxs)("div",{className:"modal-action",children:[(0,a.jsx)("button",{className:"btn",onClick:r,children:"Скасувати"}),(0,a.jsx)("button",{className:"btn btn-error",onClick:s,children:"Видалити"})]})]}),(0,a.jsx)("div",{className:"modal-backdrop",onClick:r})]}):null}},3312:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(5155),r=s(2317),n=s(1027),l=s(2115),i=s(1567);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=l.forwardRef((e,t)=>{let{className:s,variant:n,size:l,asChild:c=!1,...o}=e,u=c?r.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(d({variant:n,size:l,className:s})),ref:t,...o})});c.displayName="Button"},9749:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>i,Zp:()=>l});var a=s(5155),r=s(2115),n=s(1567);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...r})});l.displayName="Card",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-4",s),...r})});i.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-4",s),...r})}).displayName="CardFooter"},6060:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(399),r=s(2115),n=s(4595);let l=()=>{let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=(0,a.hg)(n.j,e=>{t(e),l(!1)});return()=>e()},[]),{user:e,loading:s,signInWithGoogle:async()=>{try{return(await (0,a.df)(n.j,n.h)).user}catch(e){throw console.error("Error signing in with Google:",e),e}},logout:()=>(0,a.CI)(n.j)}}},9223:(e,t,s)=>{"use strict";s.d(t,{l:()=>l});var a=s(7058),r=s(2115),n=s(4595);let l=(e,t)=>{let[s,l]=(0,r.useState)([]),[i,d]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!e)return;let s=(0,a.P)((0,a.rJ)(n.db,"calorieGoals"),(0,a._M)("userId","==",e),(0,a.My)("startDate","desc")),r=(0,a.aQ)(s,e=>{let s=e.docs.map(e=>({id:e.id,...e.data()}));if(l(s),s.length>0&&d(s[0].value),t){let e=new Date(t).getTime(),a=null;for(let t of s)if(new Date(t.startDate).setHours(0,0,0,0)<=e){a=t;break}o(a?a.value:null)}else o(s.length>0?s[0].value:null);m(!1)});return()=>r()},[e,t]),{goalHistory:s,currentGoal:i,goalForDate:c,setNewGoal:async t=>{if(e)try{await (0,a.gS)((0,a.rJ)(n.db,"calorieGoals"),{userId:e,value:t,startDate:new Date().toISOString(),createdAt:new Date().toISOString()}),await (0,a.BN)((0,a.H9)(n.db,"userProfiles",e),{userId:e,currentGoal:t,lastUpdated:new Date().toISOString()},{merge:!0})}catch(e){throw console.error("Error setting new goal:",e),e}},loading:u}}},6498:(e,t,s)=>{"use strict";s.d(t,{Q:()=>l});var a=s(7058),r=s(2115),n=s(4595);let l=e=>{let[t,s]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!e)return;let t=(0,a.P)((0,a.rJ)(n.db,"products"),(0,a._M)("userId","==",e)),r=(0,a.aQ)(t,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),s(t),i(!1)});return()=>r()},[e]),{products:t,loading:l,addProduct:async t=>{try{await (0,a.gS)((0,a.rJ)(n.db,"products"),{...t,userId:e,createdAt:new Date().toISOString()})}catch(e){throw console.error("Error adding product:",e),e}},deleteProduct:async e=>{try{await (0,a.kd)((0,a.H9)(n.db,"products",e))}catch(e){throw console.error("Error deleting product:",e),e}}}}},4595:(e,t,s)=>{"use strict";s.d(t,{db:()=>c,h:()=>d,j:()=>i});var a=s(9904),r=s(399),n=s(7058);let l=(0,a.Wp)({apiKey:"AIzaSyCFQPz1JQSGn8M2QdVkxA8tWqQvQT0QYcA",authDomain:"tracking-kcal.firebaseapp.com",projectId:"tracking-kcal",storageBucket:"tracking-kcal.firebasestorage.app",messagingSenderId:"959211134233",appId:"1:959211134233:web:621d0a43eeeb642a347988"}),i=(0,r.xI)(l),d=new r.HF,c=(0,n.aU)(l)},1567:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(3463),r=s(9795);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},9616:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>i,Z:()=>d});var a=s(5155),r=s(2115),n=s(6060);let l=(0,r.createContext)(null),i=e=>{let{children:t}=e,s=(0,n.A)();return(0,a.jsx)(l.Provider,{value:s,children:t})},d=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useAuthContext must be used within AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,882,459,172,440,441,517,358],()=>t(704)),_N_E=e.O()}]);