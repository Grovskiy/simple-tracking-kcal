(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[981],{704:(e,t,s)=>{Promise.resolve().then(s.bind(s,3867))},3867:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var r=s(5155),a=s(9616),n=s(5236),l=s(2115),i=s(3473);let d=e=>{let{onAddProduct:t}=e,[s,a]=(0,l.useState)(""),[n,d]=(0,l.useState)("");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-base font-semibold",children:"Додати новий продукт"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s&&n&&(t({name:s,caloriesPer100g:parseInt(n)}),a(""),d(""))},className:"flex gap-2",children:[(0,r.jsxs)("label",{className:"form-control w-full max-w-xs flex-1",children:[(0,r.jsx)("div",{className:"label",children:(0,r.jsx)("span",{className:"label-text",children:"Назва продукту"})}),(0,r.jsx)("input",{type:"text",placeholder:"Цільнозерновий хліб",className:"input input-sm input-bordered w-full max-w-xs text-base",value:s,onChange:e=>a(e.target.value)})]}),(0,r.jsxs)("label",{className:"form-controlmax-w-xs -mr-2",children:[(0,r.jsx)("div",{className:"label",children:(0,r.jsx)("span",{className:"label-text",children:"Ккал на 100г"})}),(0,r.jsx)("input",{type:"number",placeholder:"244",className:"input input-sm input-bordered w-20 text-base",value:n,onChange:e=>d(e.target.value)})]}),(0,r.jsxs)("label",{className:"form-control max-w-xs",children:[(0,r.jsx)("div",{className:"label",children:(0,r.jsx)("span",{className:"label-text",children:"⠀"})}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",children:(0,r.jsx)(i.A,{className:"h-5 w-5"})})]})]})]})};var c=s(2423);let o=e=>{let{currentGoal:t,onSetGoal:s,goalHistory:a}=e,[n,i]=(0,l.useState)(""),d=async e=>{if(e.preventDefault(),n)try{await s(Number(n)),i("")}catch(e){console.error("Error setting goal:",e)}},o=e=>new Date(e).toLocaleDateString("uk-UA",{day:"numeric",month:"long",year:"numeric"});return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"card-title text-base",children:"Ціль калорій"}),(0,r.jsx)("div",{className:"text-base",children:t?"".concat(t," ккал"):"Не встановлено"})]}),(0,r.jsxs)("form",{onSubmit:d,className:"mt-4 flex gap-2",children:[(0,r.jsx)("input",{type:"number",placeholder:"Нова ціль (ккал)",className:"input input-sm input-bordered flex-1 text-base",value:n,onChange:e=>i(e.target.value)}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",children:"Зберегти"})]}),a.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"divider",children:"Історія змін"}),(0,r.jsx)("div",{className:"space-y-2",children:a.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-md bg-base-200 px-2 py-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:o(e.startDate)})]}),(0,r.jsxs)("span",{className:"font-medium",children:[e.value," ккал"]})]},t))})]})]})};var u=s(5686),m=s(6030);let x={id:"",name:"",caloriesPer100g:0,userId:"",createdAt:""},f=e=>{var t;let{products:s,onDeleteProduct:a}=e,[n,i]=(0,l.useState)({isOpen:!1,product:x}),d=e=>{i({isOpen:!0,product:e})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-md bg-base-200 px-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.name}),(0,r.jsxs)("span",{className:"text-sm text-base-content/70",children:[" ","• ",e.caloriesPer100g," ккал/100г"]})]}),(0,r.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:()=>d(e),children:(0,r.jsx)(u.A,{size:16})})]},e.id))}),(0,r.jsx)(m.R,{isOpen:n.isOpen,onConfirm:()=>{n.product&&(a(n.product.id),i({isOpen:!1,product:x}))},onCancel:()=>i({isOpen:!1,product:x}),itemName:null===(t=n.product)||void 0===t?void 0:t.name})]})};var p=s(3312),h=s(9749),b=s(1125),g=s(1567);let v=b.bL,j=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(b.B8,{ref:t,className:(0,g.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...a})});j.displayName=b.B8.displayName;let N=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(b.l9,{ref:t,className:(0,g.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...a})});N.displayName=b.l9.displayName;let w=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(b.UC,{ref:t,className:(0,g.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});w.displayName=b.UC.displayName;var y=s(9223),k=s(6498);let S=()=>{let{user:e,logout:t}=(0,a.Z)(),{goalHistory:s,currentGoal:l,setNewGoal:i,loading:c}=(0,y.l)(null==e?void 0:e.uid),{products:u,addProduct:m,deleteProduct:x,loading:b}=(0,k.Q)(null==e?void 0:e.uid);return b||c?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,r.jsx)("span",{className:"loading loading-ring loading-lg"})}):(0,r.jsxs)("div",{className:"min-h-screen pb-20",children:[(0,r.jsx)("div",{className:"bg-background shadow-sm",children:(0,r.jsxs)("div",{className:"mx-auto flex max-w-xl items-center justify-between px-4 py-2",children:[(0,r.jsx)("h1",{className:"text-lg font-semibold",children:"Налаштування"}),(0,r.jsxs)(p.$,{onClick:t,size:"sm",variant:"ghost",children:[(0,r.jsx)(n.A,{size:16})," Вийти"]})]})}),(0,r.jsx)("div",{className:"mx-auto max-w-xl px-4 py-4",children:(0,r.jsxs)(v,{defaultValue:"products",children:[(0,r.jsxs)(j,{className:"mb-4 w-full",children:[(0,r.jsx)(N,{value:"products",className:"flex-1",children:"Мої продукти"}),(0,r.jsx)(N,{value:"goals",className:"flex-1",children:"Цілі"})]}),(0,r.jsx)(w,{value:"products",children:(0,r.jsx)(h.Zp,{children:(0,r.jsxs)(h.Wu,{children:[(0,r.jsx)(d,{onAddProduct:m}),(0,r.jsx)("div",{className:"divider",children:"Мої продукти"}),(0,r.jsx)(f,{products:u,onDeleteProduct:x})]})})}),(0,r.jsx)(w,{value:"goals",children:(0,r.jsx)(h.Zp,{children:(0,r.jsx)(h.Wu,{children:(0,r.jsx)(o,{currentGoal:l,onSetGoal:i,goalHistory:s})})})})]})})]})}},6030:(e,t,s)=>{"use strict";s.d(t,{R:()=>a});var r=s(5155);let a=e=>{let{isOpen:t,onConfirm:s,onCancel:a,itemName:n}=e;return t?(0,r.jsxs)("div",{className:"modal modal-open rounded-box",children:[(0,r.jsxs)("div",{className:"modal-box",children:[(0,r.jsx)("h3",{className:"text-lg font-bold",children:"Підтвердження видалення"}),(0,r.jsxs)("p",{className:"py-4",children:["Ви впевнені, що хочете видалити ",n,"?"]}),(0,r.jsxs)("div",{className:"modal-action",children:[(0,r.jsx)("button",{className:"btn",onClick:a,children:"Скасувати"}),(0,r.jsx)("button",{className:"btn btn-error",onClick:s,children:"Видалити"})]})]}),(0,r.jsx)("div",{className:"modal-backdrop",onClick:a})]}):null}},3312:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var r=s(5155),a=s(2317),n=s(1027),l=s(2115),i=s(1567);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=l.forwardRef((e,t)=>{let{className:s,variant:n,size:l,asChild:c=!1,...o}=e,u=c?a.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:n,size:l,className:s})),ref:t,...o})});c.displayName="Button"},9749:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>i,Zp:()=>l});var r=s(5155),a=s(2115),n=s(1567);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});l.displayName="Card",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})}).displayName="CardHeader",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...a})}).displayName="CardTitle",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})}).displayName="CardDescription";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-4",s),...a})});i.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-4",s),...a})}).displayName="CardFooter"},6060:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(399),a=s(2115),n=s(4595);let l=()=>{let[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=(0,r.hg)(n.j,e=>{t(e),l(!1)});return()=>e()},[]),{user:e,loading:s,signInWithGoogle:async()=>{try{return(await (0,r.df)(n.j,n.h)).user}catch(e){throw console.error("Error signing in with Google:",e),e}},logout:()=>(0,r.CI)(n.j)}}},9223:(e,t,s)=>{"use strict";s.d(t,{l:()=>l});var r=s(7058),a=s(2115),n=s(4595);let l=e=>{let[t,s]=(0,a.useState)([]),[l,i]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{if(!e)return;let t=(0,r.P)((0,r.rJ)(n.db,"calorieGoals"),(0,r._M)("userId","==",e),(0,r.My)("startDate","desc")),a=(0,r.aQ)(t,e=>{s(e.docs.map(e=>({id:e.id,...e.data()}))),c(!1)});return()=>a()},[e]),(0,a.useEffect)(()=>{if(!e)return;let t=(0,r.H9)(n.db,"userProfiles",e),s=(0,r.aQ)(t,e=>{e.exists()&&i(e.data().currentGoal)});return()=>s()},[e]),{goalHistory:t,currentGoal:l,setNewGoal:async t=>{if(e)try{await (0,r.gS)((0,r.rJ)(n.db,"calorieGoals"),{userId:e,value:t,startDate:new Date().toISOString(),createdAt:new Date().toISOString()}),await (0,r.BN)((0,r.H9)(n.db,"userProfiles",e),{userId:e,currentGoal:t,lastUpdated:new Date().toISOString()},{merge:!0})}catch(e){throw console.error("Error setting new goal:",e),e}},loading:d}}},6498:(e,t,s)=>{"use strict";s.d(t,{Q:()=>l});var r=s(7058),a=s(2115),n=s(4595);let l=e=>{let[t,s]=(0,a.useState)([]),[l,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{if(!e)return;let t=(0,r.P)((0,r.rJ)(n.db,"products"),(0,r._M)("userId","==",e)),a=(0,r.aQ)(t,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),s(t),i(!1)});return()=>a()},[e]),{products:t,loading:l,addProduct:async t=>{try{await (0,r.gS)((0,r.rJ)(n.db,"products"),{...t,userId:e,createdAt:new Date().toISOString()})}catch(e){throw console.error("Error adding product:",e),e}},deleteProduct:async e=>{try{await (0,r.kd)((0,r.H9)(n.db,"products",e))}catch(e){throw console.error("Error deleting product:",e),e}}}}},4595:(e,t,s)=>{"use strict";s.d(t,{db:()=>c,h:()=>d,j:()=>i});var r=s(9904),a=s(399),n=s(7058);let l=(0,r.Wp)({apiKey:"AIzaSyCFQPz1JQSGn8M2QdVkxA8tWqQvQT0QYcA",authDomain:"tracking-kcal.firebaseapp.com",projectId:"tracking-kcal",storageBucket:"tracking-kcal.firebasestorage.app",messagingSenderId:"959211134233",appId:"1:959211134233:web:621d0a43eeeb642a347988"}),i=(0,a.xI)(l),d=new a.HF,c=(0,n.aU)(l)},1567:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(3463),a=s(9795);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},9616:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>i,Z:()=>d});var r=s(5155),a=s(2115),n=s(6060);let l=(0,a.createContext)(null),i=e=>{let{children:t}=e,s=(0,n.A)();return(0,r.jsx)(l.Provider,{value:s,children:t})},d=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useAuthContext must be used within AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,882,459,172,440,441,517,358],()=>t(704)),_N_E=e.O()}]);